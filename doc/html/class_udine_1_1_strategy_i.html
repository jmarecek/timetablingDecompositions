<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MemosTimetabling: Udine::StrategyI Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespace_udine.html">Udine</a>::<a class="el" href="class_udine_1_1_strategy_i.html">StrategyI</a>
  </div>
</div>
<div class="contents">
<h1>Udine::StrategyI Class Reference</h1><!-- doxytag: class="Udine::StrategyI" --><code>#include &lt;<a class="el" href="strategy_8h_source.html">strategy.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for Udine::StrategyI:</div>
<div class="dynsection">
<p><center><img src="class_udine_1_1_strategy_i__inherit__graph.png" border="0" usemap="#_udine_1_1_strategy_i__inherit__map" alt="Inheritance graph"></center>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>
<div class="dynheader">
Collaboration diagram for Udine::StrategyI:</div>
<div class="dynsection">
<p><center><img src="class_udine_1_1_strategy_i__coll__graph.png" border="0" usemap="#_udine_1_1_strategy_i__coll__map" alt="Collaboration graph"></center>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#c73439e6ae76db5775994dcbd8cccaf4">StrategyI</a> (IloEnv &amp;environment, <a class="el" href="class_udine_1_1_model.html">Model</a> &amp;s, <a class="el" href="struct_udine_1_1_config.html">Config</a> &amp;configuration)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#c9b811d84791229ad00ec99441671cf3">sumMissingCourseDays</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#045b6e91b05c618173a100a72b097eb4">sumSingletonChecks</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#34cb6a3734cc8cd25589b2946c2e6a45">sumMissingSeats</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#b1995072fcfd33d9e4844daad65d909b">sumExtraRoomsUsed</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#20467bca4c6426ce299a24a53ee94f2b">logNeighbrouhood</a> (<a class="el" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a> def)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#0cd2545fc7b1d815a30354edb7467294">getFixDayNeighbourhood</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#05c87bf6b3c74568bc31e5c4a996aa36">getFixPeriodNeighbourhood</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#76cd939eb3df88b6ba30b7f977e317d5">runDiver</a> (<a class="el" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a> definition)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#d7ed204450aef8d34afa6be4ef635ae0">main</a> ()=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#83548b4bace50f695b498aadfea23dbe">finishOff</a> ()=0</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">IloEnv&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct_udine_1_1_config.html">Config</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="class_udine_1_1_model.html">Model</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="strategy_8h_source.html#l00041">41</a> of file <a class="el" href="strategy_8h_source.html">strategy.h</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="c73439e6ae76db5775994dcbd8cccaf4"></a><!-- doxytag: member="Udine::StrategyI::StrategyI" ref="c73439e6ae76db5775994dcbd8cccaf4" args="(IloEnv &amp;environment, Model &amp;s, Config &amp;configuration)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Udine::StrategyI::StrategyI           </td>
          <td>(</td>
          <td class="paramtype">IloEnv &amp;&nbsp;</td>
          <td class="paramname"> <em>environment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_udine_1_1_model.html">Model</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_udine_1_1_config.html">Config</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>configuration</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8h_source.html#l00050">50</a> of file <a class="el" href="strategy_8h_source.html">strategy.h</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00051"></a>00051   : IloCplex::IncumbentCallbackI(environment), <a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>(environment), <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>(s), <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>(configuration) {}
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="83548b4bace50f695b498aadfea23dbe"></a><!-- doxytag: member="Udine::StrategyI::finishOff" ref="83548b4bace50f695b498aadfea23dbe" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Udine::StrategyI::finishOff           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Implemented in <a class="el" href="class_udine_1_1_anytime_strategy_i.html#dad674b6ba877bb76cdce332da6d9d1a">Udine::AnytimeStrategyI</a>, <a class="el" href="class_udine_1_1_contract_strategy_i.html#807b510e83962bb97835b92fd229de59">Udine::ContractStrategyI</a>, <a class="el" href="class_udine_1_1_solution_saving_strategy_i.html#72e9677edabd99e05779c0fc344409a5">Udine::SolutionSavingStrategyI</a>, and <a class="el" href="class_udine_1_1_solution_polishing_strategy_i.html#13f7941fed28801e509d8f9e59c69715">Udine::SolutionPolishingStrategyI</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00221">runDiver()</a>, and <a class="el" href="solver_8cpp_source.html#l00032">Udine::Solver::Solver()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0cd2545fc7b1d815a30354edb7467294"></a><!-- doxytag: member="Udine::StrategyI::getFixDayNeighbourhood" ref="0cd2545fc7b1d815a30354edb7467294" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a> StrategyI::getFixDayNeighbourhood           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8cpp_source.html#l00170">170</a> of file <a class="el" href="strategy_8cpp_source.html">strategy.cpp</a>.</p>

<p>References <a class="el" href="neighbourhood_8h_source.html#l00046">Udine::Neighbourhood::cost</a>, <a class="el" href="neighbourhood_8h_source.html#l00035">Udine::CourseDayNumberTriple::course</a>, <a class="el" href="neighbourhood_8h_source.html#l00030">Udine::CoursePeriodPair::course</a>, <a class="el" href="neighbourhood_8h_source.html#l00036">Udine::CourseDayNumberTriple::day</a>, <a class="el" href="model_8h_source.html#l00051">Udine::Model::definition</a>, <a class="el" href="strategy_8h_source.html#l00044">env</a>, <a class="el" href="neighbourhood_8h_source.html#l00037">Udine::CourseDayNumberTriple::events</a>, <a class="el" href="neighbourhood_8h_source.html#l00044">Udine::Neighbourhood::fixDay</a>, <a class="el" href="solver__config_8h_source.html#l00044">Udine::FixDay</a>, <a class="el" href="loader_8h_source.html#l00102">Udine::Instance::getCourseCount()</a>, <a class="el" href="loader_8h_source.html#l00099">Udine::Instance::getDayCount()</a>, <a class="el" href="loader_8h_source.html#l00100">Udine::Instance::getPeriodsPerDayCount()</a>, <a class="el" href="loader_8h_source.html#l00122">Udine::Instance::getRoomCount()</a>, <a class="el" href="model_8h_source.html#l00044">Udine::Model::instance</a>, <a class="el" href="neighbourhood_8h_source.html#l00047">Udine::Neighbourhood::lowerBound</a>, <a class="el" href="strategy_8h_source.html#l00046">model</a>, <a class="el" href="neighbourhood_8h_source.html#l00049">Udine::Neighbourhood::penaltyCompactness</a>, <a class="el" href="neighbourhood_8h_source.html#l00048">Udine::Neighbourhood::penaltyMinCourseDays</a>, <a class="el" href="neighbourhood_8h_source.html#l00031">Udine::CoursePeriodPair::period</a>, <a class="el" href="neighbourhood_8h_source.html#l00045">Udine::Neighbourhood::preprocessAway</a>, <a class="el" href="strategy_8cpp_source.html#l00030">roundProperly()</a>, <a class="el" href="strategy_8cpp_source.html#l00032">sumMissingCourseDays()</a>, <a class="el" href="strategy_8cpp_source.html#l00044">sumSingletonChecks()</a>, <a class="el" href="neighbourhood_8h_source.html#l00042">Udine::Neighbourhood::type</a>, <a class="el" href="model_8h_source.html#l00047">Udine::Model::vars</a>, and <a class="el" href="variables_8h_source.html#l00038">Udine::Variables::x</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00287">Udine::ContractStrategyI::main()</a>, and <a class="el" href="strategy_8cpp_source.html#l00261">Udine::AnytimeStrategyI::main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00170"></a>00170                                                 {
<a name="l00171"></a>00171   <a class="code" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a> next;
<a name="l00172"></a>00172   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> = <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378ebd0021c0608a1b50450cd305a2e9f4c">FixDay</a>;
<a name="l00173"></a>00173   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#8856b8dea41bbcfe7d2b050ec6018907">cost</a> = getObjValue();
<a name="l00174"></a>00174   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#e74c0a29e06868cbba038e8ae9500f82">lowerBound</a> = getBestObjValue();
<a name="l00175"></a>00175   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#4f6c8b92a5f71100d10b8c698ecca3ef">penaltyMinCourseDays</a> = <a class="code" href="class_udine_1_1_strategy_i.html#c9b811d84791229ad00ec99441671cf3">sumMissingCourseDays</a>();
<a name="l00176"></a>00176   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#69f83574b01b2b10f11d76405eb116b1">penaltyCompactness</a> = <a class="code" href="class_udine_1_1_strategy_i.html#045b6e91b05c618173a100a72b097eb4">sumSingletonChecks</a>();
<a name="l00177"></a>00177   <span class="keywordtype">int</span> c, d, p, r;  <span class="comment">// course, day, period, room</span>
<a name="l00178"></a>00178 
<a name="l00179"></a>00179   <span class="keywordflow">for</span>(c = 0; c &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#6020dc8bfec316fa74b5594ce6bb12e9">getCourseCount</a>(); c++) {
<a name="l00180"></a>00180     <a class="code" href="struct_udine_1_1_course_period_pair.html">CoursePeriodPair</a> pair;
<a name="l00181"></a>00181     pair.<a class="code" href="struct_udine_1_1_course_period_pair.html#d0ac51cc90d80dbfb34996643bf243bf">course</a> = c;
<a name="l00182"></a>00182     <a class="code" href="struct_udine_1_1_course_day_number_triple.html">CourseDayNumberTriple</a> triple;
<a name="l00183"></a>00183     triple.<a class="code" href="struct_udine_1_1_course_day_number_triple.html#5987baa72cd9142053b203560f89434b">course</a> = c;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="keywordflow">for</span> (d = 0; d &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#a69b0cbf804f657b02b9bebd807a11ce">getDayCount</a>(); d++) {
<a name="l00186"></a>00186       triple.<a class="code" href="struct_udine_1_1_course_day_number_triple.html#249c02883e7f5e7c930640d8ea5fec2a">day</a> = d;
<a name="l00187"></a>00187       triple.<a class="code" href="struct_udine_1_1_course_day_number_triple.html#5e18d101d68990c429929a80e8ed3641">events</a> = 0;
<a name="l00188"></a>00188       <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190       <span class="keywordflow">for</span> (p = d * <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#c1d2656cb45a9b3f09c3dc8f4096f5d5">getPeriodsPerDayCount</a>(); 
<a name="l00191"></a>00191            p &lt; (d + 1) * <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#c1d2656cb45a9b3f09c3dc8f4096f5d5">getPeriodsPerDayCount</a>(); p++)
<a name="l00192"></a>00192         <span class="keywordflow">try</span> {
<a name="l00193"></a>00193           IloExpr sum(<a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>);
<a name="l00194"></a>00194           <span class="keywordflow">for</span> (r = 0; r &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#0236aa15c9e367c0b235a5398d19356c">getRoomCount</a>(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a>); r++)
<a name="l00195"></a>00195             sum += <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#a2eb63247509b9e19c3ca82b1ff3becd">x</a>[p][r][c];
<a name="l00196"></a>00196           triple.<a class="code" href="struct_udine_1_1_course_day_number_triple.html#5e18d101d68990c429929a80e8ed3641">events</a> += <a class="code" href="strategy_8cpp.html#e32e602f9e9db5c127e1eece8c797425">roundProperly</a>(getValue(sum));
<a name="l00197"></a>00197         } <span class="keywordflow">catch</span> (IloAlgorithm::NotExtractedException e)  { 
<a name="l00198"></a>00198           std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving value of x for c = "</span> &lt;&lt; c &lt;&lt; <span class="stringliteral">" and d = "</span> &lt;&lt; d &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; std::endl;
<a name="l00199"></a>00199           ok = <span class="keyword">false</span>; 
<a name="l00200"></a>00200         } <span class="keywordflow">catch</span> (...) { 
<a name="l00201"></a>00201           std::cerr &lt;&lt; <span class="stringliteral">"Unknown error retrieving value of x for c = "</span> &lt;&lt; c &lt;&lt; <span class="stringliteral">" and d = "</span> &lt;&lt; d &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; std::endl; 
<a name="l00202"></a>00202           <span class="keywordflow">throw</span>; 
<a name="l00203"></a>00203         }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205       <span class="keywordflow">if</span> (triple.<a class="code" href="struct_udine_1_1_course_day_number_triple.html#5e18d101d68990c429929a80e8ed3641">events</a> &gt; 0) { 
<a name="l00206"></a>00206         next.<a class="code" href="struct_udine_1_1_neighbourhood.html#150b82a8e44425ee30c140668e59c5c5">fixDay</a>.push_back(triple);
<a name="l00207"></a>00207       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ok)
<a name="l00208"></a>00208         <span class="keywordflow">for</span> (p = d * <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#c1d2656cb45a9b3f09c3dc8f4096f5d5">getPeriodsPerDayCount</a>(); 
<a name="l00209"></a>00209              p &lt; (d + 1) * <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#c1d2656cb45a9b3f09c3dc8f4096f5d5">getPeriodsPerDayCount</a>(); 
<a name="l00210"></a>00210              p++) {
<a name="l00211"></a>00211         pair.<a class="code" href="struct_udine_1_1_course_period_pair.html#56ea1139126925afd8e55ffdd78a4246">period</a> = p;
<a name="l00212"></a>00212         next.<a class="code" href="struct_udine_1_1_neighbourhood.html#e733c9b23d33925bb5a1a9bc5709f529">preprocessAway</a>.push_back(pair);
<a name="l00213"></a>00213       }
<a name="l00214"></a>00214     }
<a name="l00215"></a>00215   }
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   <span class="keywordflow">return</span> next;
<a name="l00218"></a>00218 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="05c87bf6b3c74568bc31e5c4a996aa36"></a><!-- doxytag: member="Udine::StrategyI::getFixPeriodNeighbourhood" ref="05c87bf6b3c74568bc31e5c4a996aa36" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a> StrategyI::getFixPeriodNeighbourhood           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8cpp_source.html#l00134">134</a> of file <a class="el" href="strategy_8cpp_source.html">strategy.cpp</a>.</p>

<p>References <a class="el" href="neighbourhood_8h_source.html#l00046">Udine::Neighbourhood::cost</a>, <a class="el" href="neighbourhood_8h_source.html#l00030">Udine::CoursePeriodPair::course</a>, <a class="el" href="variables_8h_source.html#l00046">Udine::Variables::coursePeriods</a>, <a class="el" href="model_8h_source.html#l00051">Udine::Model::definition</a>, <a class="el" href="strategy_8h_source.html#l00044">env</a>, <a class="el" href="solver__config_8h_source.html#l00044">Udine::FixDay</a>, <a class="el" href="neighbourhood_8h_source.html#l00043">Udine::Neighbourhood::fixPeriod</a>, <a class="el" href="solver__config_8h_source.html#l00043">Udine::FixPeriod</a>, <a class="el" href="loader_8h_source.html#l00102">Udine::Instance::getCourseCount()</a>, <a class="el" href="loader_8h_source.html#l00098">Udine::Instance::getPeriodCount()</a>, <a class="el" href="loader_8h_source.html#l00122">Udine::Instance::getRoomCount()</a>, <a class="el" href="model_8h_source.html#l00044">Udine::Model::instance</a>, <a class="el" href="neighbourhood_8h_source.html#l00047">Udine::Neighbourhood::lowerBound</a>, <a class="el" href="strategy_8h_source.html#l00046">model</a>, <a class="el" href="neighbourhood_8h_source.html#l00049">Udine::Neighbourhood::penaltyCompactness</a>, <a class="el" href="neighbourhood_8h_source.html#l00048">Udine::Neighbourhood::penaltyMinCourseDays</a>, <a class="el" href="neighbourhood_8h_source.html#l00031">Udine::CoursePeriodPair::period</a>, <a class="el" href="neighbourhood_8h_source.html#l00045">Udine::Neighbourhood::preprocessAway</a>, <a class="el" href="strategy_8cpp_source.html#l00030">roundProperly()</a>, <a class="el" href="strategy_8cpp_source.html#l00032">sumMissingCourseDays()</a>, <a class="el" href="strategy_8cpp_source.html#l00044">sumSingletonChecks()</a>, <a class="el" href="neighbourhood_8h_source.html#l00042">Udine::Neighbourhood::type</a>, <a class="el" href="model_8h_source.html#l00047">Udine::Model::vars</a>, and <a class="el" href="variables_8h_source.html#l00038">Udine::Variables::x</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00405">Udine::SolutionPolishingStrategyI::main()</a>, <a class="el" href="strategy_8cpp_source.html#l00287">Udine::ContractStrategyI::main()</a>, and <a class="el" href="strategy_8cpp_source.html#l00261">Udine::AnytimeStrategyI::main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00134"></a>00134                                                    {
<a name="l00135"></a>00135   <a class="code" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a> next;
<a name="l00136"></a>00136   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> = <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378d0dea5c2f48fa71a1600db62dc494764">FixPeriod</a>;
<a name="l00137"></a>00137   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#8856b8dea41bbcfe7d2b050ec6018907">cost</a> = getObjValue();
<a name="l00138"></a>00138   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#e74c0a29e06868cbba038e8ae9500f82">lowerBound</a> = getBestObjValue();
<a name="l00139"></a>00139   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#4f6c8b92a5f71100d10b8c698ecca3ef">penaltyMinCourseDays</a> = <a class="code" href="class_udine_1_1_strategy_i.html#c9b811d84791229ad00ec99441671cf3">sumMissingCourseDays</a>();
<a name="l00140"></a>00140   next.<a class="code" href="struct_udine_1_1_neighbourhood.html#69f83574b01b2b10f11d76405eb116b1">penaltyCompactness</a> = <a class="code" href="class_udine_1_1_strategy_i.html#045b6e91b05c618173a100a72b097eb4">sumSingletonChecks</a>();
<a name="l00141"></a>00141 
<a name="l00142"></a>00142   <span class="keywordtype">int</span> c, p, r;  <span class="comment">// course, period</span>
<a name="l00143"></a>00143   <span class="keywordflow">for</span>(c = 0; c &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#6020dc8bfec316fa74b5594ce6bb12e9">getCourseCount</a>(); c++)
<a name="l00144"></a>00144     <span class="keywordflow">for</span> (p = 0; p &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#e66c619fb7725c038dad84d29cf7880e">getPeriodCount</a>(); p++) {
<a name="l00145"></a>00145       <a class="code" href="struct_udine_1_1_course_period_pair.html">CoursePeriodPair</a> pair;
<a name="l00146"></a>00146       pair.<a class="code" href="struct_udine_1_1_course_period_pair.html#56ea1139126925afd8e55ffdd78a4246">period</a> = p;
<a name="l00147"></a>00147       pair.<a class="code" href="struct_udine_1_1_course_period_pair.html#d0ac51cc90d80dbfb34996643bf243bf">course</a> = c;
<a name="l00148"></a>00148       <span class="keywordflow">try</span> { 
<a name="l00149"></a>00149         IloExpr sum(<a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>);
<a name="l00150"></a>00150         <span class="keywordflow">for</span> (r = 0; r &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#0236aa15c9e367c0b235a5398d19356c">getRoomCount</a>(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a>); r++)
<a name="l00151"></a>00151           sum += <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#a2eb63247509b9e19c3ca82b1ff3becd">x</a>[p][r][c];
<a name="l00152"></a>00152         assert(std::fabs(1 - getValue(sum)) &lt; 0.0001 || std::fabs(getValue(sum)) &lt; 0.0001);
<a name="l00153"></a>00153         <span class="keywordflow">if</span> (<a class="code" href="strategy_8cpp.html#e32e602f9e9db5c127e1eece8c797425">roundProperly</a>(getValue(sum)) == 1)
<a name="l00154"></a>00154           next.<a class="code" href="struct_udine_1_1_neighbourhood.html#888ac9463e2eb016f4ab334bc901fc40">fixPeriod</a>.push_back(pair);
<a name="l00155"></a>00155         <span class="keywordflow">else</span> 
<a name="l00156"></a>00156           next.<a class="code" href="struct_udine_1_1_neighbourhood.html#e733c9b23d33925bb5a1a9bc5709f529">preprocessAway</a>.push_back(pair);
<a name="l00157"></a>00157         <span class="keywordflow">if</span> (<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> == <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378ebd0021c0608a1b50450cd305a2e9f4c">FixDay</a>)
<a name="l00158"></a>00158           assert(<a class="code" href="strategy_8cpp.html#e32e602f9e9db5c127e1eece8c797425">roundProperly</a>(getValue(sum)) == <a class="code" href="strategy_8cpp.html#e32e602f9e9db5c127e1eece8c797425">roundProperly</a>(getValue(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#7b12dffddf2f2aaa1d63a6eff19f8fe7">coursePeriods</a>[c][p])));
<a name="l00159"></a>00159       } <span class="keywordflow">catch</span> (IloAlgorithm::NotExtractedException e)  { 
<a name="l00160"></a>00160         std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#a2eb63247509b9e19c3ca82b1ff3becd">x</a>[p][r][c].getName() &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; std::endl; 
<a name="l00161"></a>00161       } <span class="keywordflow">catch</span> (...)  { 
<a name="l00162"></a>00162         std::cerr &lt;&lt; <span class="stringliteral">"Unknown error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#a2eb63247509b9e19c3ca82b1ff3becd">x</a>[p][r][c].getName() &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; std::endl; 
<a name="l00163"></a>00163         <span class="keywordflow">throw</span>; 
<a name="l00164"></a>00164       }
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166   <span class="keywordflow">return</span> next;
<a name="l00167"></a>00167 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="20467bca4c6426ce299a24a53ee94f2b"></a><!-- doxytag: member="Udine::StrategyI::logNeighbrouhood" ref="20467bca4c6426ce299a24a53ee94f2b" args="(Neighbourhood def)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StrategyI::logNeighbrouhood           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a>&nbsp;</td>
          <td class="paramname"> <em>def</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8cpp_source.html#l00091">91</a> of file <a class="el" href="strategy_8cpp_source.html">strategy.cpp</a>.</p>

<p>References <a class="el" href="model_8h_source.html#l00052">Udine::Model::config</a>, <a class="el" href="strategy_8h_source.html#l00045">config</a>, <a class="el" href="neighbourhood_8h_source.html#l00046">Udine::Neighbourhood::cost</a>, <a class="el" href="solver__config_8cpp_source.html#l00098">Udine::Config::elapsed()</a>, <a class="el" href="strategy_8h_source.html#l00044">env</a>, <a class="el" href="neighbourhood_8h_source.html#l00044">Udine::Neighbourhood::fixDay</a>, <a class="el" href="neighbourhood_8h_source.html#l00043">Udine::Neighbourhood::fixPeriod</a>, <a class="el" href="solver__config_8cpp_source.html#l00078">Udine::Config::getParam()</a>, <a class="el" href="neighbourhood_8h_source.html#l00047">Udine::Neighbourhood::lowerBound</a>, <a class="el" href="strategy_8h_source.html#l00046">model</a>, <a class="el" href="solver__config_8h_source.html#l00110">Udine::Config::path</a>, <a class="el" href="neighbourhood_8h_source.html#l00049">Udine::Neighbourhood::penaltyCompactness</a>, <a class="el" href="neighbourhood_8h_source.html#l00048">Udine::Neighbourhood::penaltyMinCourseDays</a>, and <a class="el" href="solver__config_8h_source.html#l00064">Udine::UseNeighbourhoodLogging</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00287">Udine::ContractStrategyI::main()</a>, and <a class="el" href="strategy_8cpp_source.html#l00261">Udine::AnytimeStrategyI::main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00091"></a>00091                                                   {
<a name="l00092"></a>00092   <span class="keywordflow">try</span> {      
<a name="l00093"></a>00093     std::stringstream log;
<a name="l00094"></a>00094     log &lt;&lt; <span class="stringliteral">"&lt;neighbourhood "</span>;
<a name="l00095"></a>00095     log &lt;&lt; <span class="stringliteral">"data='"</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>.<a class="code" href="struct_udine_1_1_config.html#19bdbb787d800b77fe8565ea543173b1">path</a> &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00096"></a>00096     log &lt;&lt; <span class="stringliteral">"discovered='"</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>.<a class="code" href="struct_udine_1_1_config.html#5d418a03e5e6c0ebe839987e82b2aba0">elapsed</a>() &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00097"></a>00097     log &lt;&lt; <span class="stringliteral">"cost='"</span> &lt;&lt; def.<a class="code" href="struct_udine_1_1_neighbourhood.html#8856b8dea41bbcfe7d2b050ec6018907">cost</a> &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00098"></a>00098     log &lt;&lt; <span class="stringliteral">"penaltyCompactness='"</span> &lt;&lt; def.<a class="code" href="struct_udine_1_1_neighbourhood.html#69f83574b01b2b10f11d76405eb116b1">penaltyCompactness</a> &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00099"></a>00099     log &lt;&lt; <span class="stringliteral">"penaltyMinCourseDays='"</span> &lt;&lt; def.<a class="code" href="struct_udine_1_1_neighbourhood.html#4f6c8b92a5f71100d10b8c698ecca3ef">penaltyMinCourseDays</a> &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00100"></a>00100     log &lt;&lt; <span class="stringliteral">"LB='"</span> &lt;&lt; def.<a class="code" href="struct_udine_1_1_neighbourhood.html#e74c0a29e06868cbba038e8ae9500f82">lowerBound</a> &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00101"></a>00101     log &lt;&lt; <span class="stringliteral">"'&gt;&lt;definition&gt;"</span> &lt;&lt; std::endl;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     std::vector&lt;CoursePeriodPair&gt;::iterator itFixPeriod;
<a name="l00104"></a>00104     <span class="keywordflow">for</span> (itFixPeriod = def.<a class="code" href="struct_udine_1_1_neighbourhood.html#888ac9463e2eb016f4ab334bc901fc40">fixPeriod</a>.begin(); 
<a name="l00105"></a>00105          itFixPeriod != def.<a class="code" href="struct_udine_1_1_neighbourhood.html#888ac9463e2eb016f4ab334bc901fc40">fixPeriod</a>.end(); itFixPeriod++) {
<a name="l00106"></a>00106       log &lt;&lt; <span class="stringliteral">"&lt;session course='"</span> &lt;&lt; itFixPeriod-&gt;course &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00107"></a>00107       log &lt;&lt; <span class="stringliteral">" period='"</span> &lt;&lt; itFixPeriod-&gt;period &lt;&lt; <span class="stringliteral">"'/&gt;"</span>;
<a name="l00108"></a>00108     }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     std::vector&lt;CourseDayNumberTriple&gt;::iterator itFixDay;
<a name="l00111"></a>00111     <span class="keywordflow">for</span> (itFixDay = def.<a class="code" href="struct_udine_1_1_neighbourhood.html#150b82a8e44425ee30c140668e59c5c5">fixDay</a>.begin(); 
<a name="l00112"></a>00112          itFixDay != def.<a class="code" href="struct_udine_1_1_neighbourhood.html#150b82a8e44425ee30c140668e59c5c5">fixDay</a>.end(); itFixDay++) {
<a name="l00113"></a>00113       log &lt;&lt; <span class="stringliteral">"&lt;session course='"</span> &lt;&lt; itFixDay-&gt;course &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00114"></a>00114       log &lt;&lt; <span class="stringliteral">" day='"</span> &lt;&lt; itFixDay-&gt;day &lt;&lt; <span class="stringliteral">"' "</span>;
<a name="l00115"></a>00115       log &lt;&lt; <span class="stringliteral">" events='"</span> &lt;&lt; itFixDay-&gt;events &lt;&lt; <span class="stringliteral">"'/&gt;"</span>;
<a name="l00116"></a>00116     }
<a name="l00117"></a>00117 
<a name="l00118"></a>00118     log &lt;&lt; <span class="stringliteral">"&lt;/definition&gt;&lt;/neighbourhood&gt;"</span>;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     <span class="keywordflow">if</span> (<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#c6b5bc705201030d6d7f2001dab10788">config</a>.<a class="code" href="struct_udine_1_1_config.html#442ff0dfb189dd3f733e0876f3c17405">getParam</a>(<a class="code" href="namespace_udine.html#7a28bfbd1d7d606db82f999b139d9aae09f37e22e09953fdac5d84ce61227522">UseNeighbourhoodLogging</a>)) {
<a name="l00121"></a>00121       <a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>.out() &lt;&lt; <span class="stringliteral">"&lt;/cplex&gt;\n"</span> &lt;&lt; log.str() &lt;&lt; <span class="stringliteral">"&lt;cplex&gt;"</span> &lt;&lt; std::endl;
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124     std::stringstream filename;
<a name="l00125"></a>00125     filename &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>.<a class="code" href="struct_udine_1_1_config.html#19bdbb787d800b77fe8565ea543173b1">path</a> &lt;&lt; <span class="stringliteral">".nei"</span> &lt;&lt; (int)def.<a class="code" href="struct_udine_1_1_neighbourhood.html#8856b8dea41bbcfe7d2b050ec6018907">cost</a> &lt;&lt; <span class="stringliteral">".xml"</span>;
<a name="l00126"></a>00126     std::ofstream neiFile(filename.str().c_str(), ios::app);
<a name="l00127"></a>00127     neiFile &lt;&lt; log.str() &lt;&lt; std::endl;
<a name="l00128"></a>00128     neiFile.close();
<a name="l00129"></a>00129   }
<a name="l00130"></a>00130   <span class="keywordflow">catch</span> (...) { std::cerr &lt;&lt; <span class="stringliteral">"There was an error saving the neighbourhood."</span> &lt;&lt; std::endl; <span class="keywordflow">return</span>; }
<a name="l00131"></a>00131 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d7ed204450aef8d34afa6be4ef635ae0"></a><!-- doxytag: member="Udine::StrategyI::main" ref="d7ed204450aef8d34afa6be4ef635ae0" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Udine::StrategyI::main           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Implemented in <a class="el" href="class_udine_1_1_anytime_strategy_i.html#31784ebdb286c5e58630b2455479eeb4">Udine::AnytimeStrategyI</a>, <a class="el" href="class_udine_1_1_contract_strategy_i.html#69c594d3d4e4f63dd36ae12aaf5ba54b">Udine::ContractStrategyI</a>, <a class="el" href="class_udine_1_1_solution_saving_strategy_i.html#6e76979b8a1baecf39e957fdef014ffe">Udine::SolutionSavingStrategyI</a>, and <a class="el" href="class_udine_1_1_solution_polishing_strategy_i.html#39021fd0764900d8ff6e4fa72adccf56">Udine::SolutionPolishingStrategyI</a>.</p>

</div>
</div><p>
<a class="anchor" name="76cd939eb3df88b6ba30b7f977e317d5"></a><!-- doxytag: member="Udine::StrategyI::runDiver" ref="76cd939eb3df88b6ba30b7f977e317d5" args="(Neighbourhood definition)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StrategyI::runDiver           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_udine_1_1_neighbourhood.html">Neighbourhood</a>&nbsp;</td>
          <td class="paramname"> <em>definition</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8cpp_source.html#l00221">221</a> of file <a class="el" href="strategy_8cpp_source.html">strategy.cpp</a>.</p>

<p>References <a class="el" href="solver__config_8cpp_source.html#l00113">Udine::Config::apply()</a>, <a class="el" href="strategy_8h_source.html#l00045">config</a>, <a class="el" href="model_8h_source.html#l00052">Udine::Model::config</a>, <a class="el" href="model_8h_source.html#l00050">Udine::Model::conflictGraph</a>, <a class="el" href="neighbourhood_8h_source.html#l00046">Udine::Neighbourhood::cost</a>, <a class="el" href="model_8h_source.html#l00051">Udine::Model::definition</a>, <a class="el" href="strategy_8h_source.html#l00044">env</a>, <a class="el" href="class_udine_1_1_strategy_i.html#83548b4bace50f695b498aadfea23dbe">finishOff()</a>, <a class="el" href="solver__config_8h_source.html#l00044">Udine::FixDay</a>, <a class="el" href="solver__config_8cpp_source.html#l00078">Udine::Config::getParam()</a>, <a class="el" href="model_8h_source.html#l00044">Udine::Model::instance</a>, <a class="el" href="strategy_8h_source.html#l00046">model</a>, <a class="el" href="solver__config_8h_source.html#l00110">Udine::Config::path</a>, <a class="el" href="neighbourhood_8h_source.html#l00042">Udine::Neighbourhood::type</a>, and <a class="el" href="solver__config_8h_source.html#l00071">Udine::UseLpFilesExport</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00410">Udine::SolutionPolishingStrategyI::finishOff()</a>, <a class="el" href="strategy_8cpp_source.html#l00293">Udine::ContractStrategyI::finishOff()</a>, and <a class="el" href="strategy_8cpp_source.html#l00261">Udine::AnytimeStrategyI::main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00221"></a>00221                                            {
<a name="l00222"></a>00222 
<a name="l00223"></a>00223   <span class="keywordflow">try</span> {  
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     IloModel subMIPModel(<a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>);
<a name="l00226"></a>00226     <a class="code" href="class_udine_1_1_model.html">Model</a> subMIP(subMIPModel, <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#c6b5bc705201030d6d7f2001dab10788">config</a>, <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>, <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#dc3232ba292becc230436c5a14073a90">conflictGraph</a>, next);
<a name="l00227"></a>00227     IloCplex cplex(subMIPModel);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229     <span class="keywordflow">if</span> (<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#c6b5bc705201030d6d7f2001dab10788">config</a>.<a class="code" href="struct_udine_1_1_config.html#442ff0dfb189dd3f733e0876f3c17405">getParam</a>(<a class="code" href="namespace_udine.html#7a28bfbd1d7d606db82f999b139d9aae65ad86a0d514810358d356e097503d4d">UseLpFilesExport</a>)) {
<a name="l00230"></a>00230       std::stringstream filename;
<a name="l00231"></a>00231       filename &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>.<a class="code" href="struct_udine_1_1_config.html#19bdbb787d800b77fe8565ea543173b1">path</a> &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; next.type &lt;&lt; next.cost &lt;&lt; <span class="stringliteral">".lp"</span>;
<a name="l00232"></a>00232       cplex.exportModel(filename.str().c_str());
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>.out() &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">"Diving into the "</span> &lt;&lt; next.type &lt;&lt; <span class="stringliteral">" neighbouhood from "</span>;
<a name="l00236"></a>00236     <a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>.out() &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> &lt;&lt; <span class="stringliteral">" ..."</span> &lt;&lt; std::endl;
<a name="l00237"></a>00237     
<a name="l00238"></a>00238     <a class="code" href="class_udine_1_1_strategy_i.html">StrategyI</a> *strategy = NULL;
<a name="l00239"></a>00239     <span class="keywordflow">if</span> (next.type == <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378ebd0021c0608a1b50450cd305a2e9f4c">FixDay</a>)
<a name="l00240"></a>00240       strategy = <span class="keyword">new</span> (<a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>) <a class="code" href="class_udine_1_1_solution_polishing_strategy_i.html">SolutionPolishingStrategyI</a>(<a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>, subMIP, <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>);
<a name="l00241"></a>00241     <span class="keywordflow">else</span> <span class="comment">// NOTE: assumes model.config.getParam(UseSolutionLogging)</span>
<a name="l00242"></a>00242       strategy = <span class="keyword">new</span> (<a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>) <a class="code" href="class_udine_1_1_solution_saving_strategy_i.html">SolutionSavingStrategyI</a>(<a class="code" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">env</a>, subMIP, <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>);
<a name="l00243"></a>00243     cplex.use(IloCplex::Callback(strategy));
<a name="l00244"></a>00244     
<a name="l00245"></a>00245     <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>.<a class="code" href="struct_udine_1_1_config.html#062f07922a6545ac00afd9b54164f01f">apply</a>(cplex, next.type);
<a name="l00246"></a>00246     cplex.solve();
<a name="l00247"></a>00247     strategy-&gt;<a class="code" href="class_udine_1_1_strategy_i.html#83548b4bace50f695b498aadfea23dbe">finishOff</a>();
<a name="l00248"></a>00248   }
<a name="l00249"></a>00249   <span class="keywordflow">catch</span> (IloException&amp; e) { std::cerr &lt;&lt; <span class="stringliteral">"Solver (Strategy): Concert exception caught: "</span> &lt;&lt; e &lt;&lt; std::endl; }
<a name="l00250"></a>00250   <span class="keywordflow">catch</span> (...) { std::cerr &lt;&lt; <span class="stringliteral">"Solver (Strategy): Unknown exception caught."</span> &lt;&lt; std::endl; }
<a name="l00251"></a>00251 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b1995072fcfd33d9e4844daad65d909b"></a><!-- doxytag: member="Udine::StrategyI::sumExtraRoomsUsed" ref="b1995072fcfd33d9e4844daad65d909b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StrategyI::sumExtraRoomsUsed           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8cpp_source.html#l00079">79</a> of file <a class="el" href="strategy_8cpp_source.html">strategy.cpp</a>.</p>

<p>References <a class="el" href="variables_8h_source.html#l00044">Udine::Variables::courseRooms</a>, <a class="el" href="model_8h_source.html#l00051">Udine::Model::definition</a>, <a class="el" href="loader_8h_source.html#l00102">Udine::Instance::getCourseCount()</a>, <a class="el" href="loader_8h_source.html#l00122">Udine::Instance::getRoomCount()</a>, <a class="el" href="model_8h_source.html#l00044">Udine::Model::instance</a>, <a class="el" href="strategy_8h_source.html#l00046">model</a>, <a class="el" href="strategy_8cpp_source.html#l00030">roundProperly()</a>, <a class="el" href="neighbourhood_8h_source.html#l00042">Udine::Neighbourhood::type</a>, and <a class="el" href="model_8h_source.html#l00047">Udine::Model::vars</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00321">Udine::SolutionSavingStrategyI::main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00079"></a>00079                                  {
<a name="l00080"></a>00080   <span class="keywordtype">int</span> i = 0;
<a name="l00081"></a>00081   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#6020dc8bfec316fa74b5594ce6bb12e9">getCourseCount</a>(); c++)
<a name="l00082"></a>00082     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = 0; r &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#0236aa15c9e367c0b235a5398d19356c">getRoomCount</a>(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a>); r++)
<a name="l00083"></a>00083       <span class="comment">// TODO: Why this could fail</span>
<a name="l00084"></a>00084       <span class="keywordflow">try</span> { i += <a class="code" href="strategy_8cpp.html#e32e602f9e9db5c127e1eece8c797425">roundProperly</a>(getValue(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#327855fbc3c49651423ea183f5420add">courseRooms</a>[c][r])); } 
<a name="l00085"></a>00085       <span class="keywordflow">catch</span> (IloAlgorithm::NotExtractedException e)  { std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#327855fbc3c49651423ea183f5420add">courseRooms</a>[c][r].getName() &lt;&lt; std::endl; }
<a name="l00086"></a>00086       <span class="keywordflow">catch</span> (...) { std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#327855fbc3c49651423ea183f5420add">courseRooms</a>[c][r].getName() &lt;&lt; std::endl; <span class="keywordflow">throw</span>; }
<a name="l00087"></a>00087   i -= <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#6020dc8bfec316fa74b5594ce6bb12e9">getCourseCount</a>();
<a name="l00088"></a>00088   <span class="keywordflow">return</span> i;
<a name="l00089"></a>00089 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c9b811d84791229ad00ec99441671cf3"></a><!-- doxytag: member="Udine::StrategyI::sumMissingCourseDays" ref="c9b811d84791229ad00ec99441671cf3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StrategyI::sumMissingCourseDays           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8cpp_source.html#l00032">32</a> of file <a class="el" href="strategy_8cpp_source.html">strategy.cpp</a>.</p>

<p>References <a class="el" href="variables_8h_source.html#l00042">Udine::Variables::courseMinDayViolations</a>, <a class="el" href="model_8h_source.html#l00051">Udine::Model::definition</a>, <a class="el" href="solver__config_8h_source.html#l00044">Udine::FixDay</a>, <a class="el" href="solver__config_8h_source.html#l00043">Udine::FixPeriod</a>, <a class="el" href="loader_8h_source.html#l00102">Udine::Instance::getCourseCount()</a>, <a class="el" href="model_8h_source.html#l00044">Udine::Model::instance</a>, <a class="el" href="strategy_8h_source.html#l00046">model</a>, <a class="el" href="neighbourhood_8h_source.html#l00048">Udine::Neighbourhood::penaltyMinCourseDays</a>, <a class="el" href="strategy_8cpp_source.html#l00030">roundProperly()</a>, <a class="el" href="neighbourhood_8h_source.html#l00042">Udine::Neighbourhood::type</a>, and <a class="el" href="model_8h_source.html#l00047">Udine::Model::vars</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00170">getFixDayNeighbourhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00134">getFixPeriodNeighbourhood()</a>, and <a class="el" href="strategy_8cpp_source.html#l00321">Udine::SolutionSavingStrategyI::main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00032"></a>00032                                     {
<a name="l00033"></a>00033   <span class="keywordflow">if</span> (<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> == <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378ebd0021c0608a1b50450cd305a2e9f4c">FixDay</a> || <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> == <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378d0dea5c2f48fa71a1600db62dc494764">FixPeriod</a>)
<a name="l00034"></a>00034     <span class="keywordflow">return</span> <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#4f6c8b92a5f71100d10b8c698ecca3ef">penaltyMinCourseDays</a>;
<a name="l00035"></a>00035 
<a name="l00036"></a>00036   <span class="keywordtype">int</span> i = 0;
<a name="l00037"></a>00037   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#6020dc8bfec316fa74b5594ce6bb12e9">getCourseCount</a>(); c++)
<a name="l00038"></a>00038     <span class="keywordflow">try</span> { i += <a class="code" href="strategy_8cpp.html#e32e602f9e9db5c127e1eece8c797425">roundProperly</a>(getValue(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#81e79cbc7591456ec72e0130a2a79ae1">courseMinDayViolations</a>[c])); } 
<a name="l00039"></a>00039     <span class="keywordflow">catch</span> (IloAlgorithm::NotExtractedException e)  { std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#81e79cbc7591456ec72e0130a2a79ae1">courseMinDayViolations</a>[c].getName() &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; std::endl; }
<a name="l00040"></a>00040     <span class="keywordflow">catch</span> (...)  { std::cerr &lt;&lt; <span class="stringliteral">"Unknown error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#81e79cbc7591456ec72e0130a2a79ae1">courseMinDayViolations</a>[c].getName() &lt;&lt; <span class="stringliteral">"."</span> &lt;&lt; std::endl; <span class="keywordflow">throw</span>; }
<a name="l00041"></a>00041   <span class="keywordflow">return</span> i;
<a name="l00042"></a>00042 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="34cb6a3734cc8cd25589b2946c2e6a45"></a><!-- doxytag: member="Udine::StrategyI::sumMissingSeats" ref="34cb6a3734cc8cd25589b2946c2e6a45" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StrategyI::sumMissingSeats           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8cpp_source.html#l00064">64</a> of file <a class="el" href="strategy_8cpp_source.html">strategy.cpp</a>.</p>

<p>References <a class="el" href="model_8h_source.html#l00051">Udine::Model::definition</a>, <a class="el" href="loader_8h_source.html#l00107">Udine::Instance::getCourse()</a>, <a class="el" href="loader_8h_source.html#l00102">Udine::Instance::getCourseCount()</a>, <a class="el" href="loader_8h_source.html#l00098">Udine::Instance::getPeriodCount()</a>, <a class="el" href="loader_8h_source.html#l00122">Udine::Instance::getRoomCount()</a>, <a class="el" href="loader_8h_source.html#l00146">Udine::Instance::getRoomPerEventCapacity()</a>, <a class="el" href="model_8h_source.html#l00044">Udine::Model::instance</a>, <a class="el" href="strategy_8h_source.html#l00046">model</a>, <a class="el" href="strategy_8cpp_source.html#l00030">roundProperly()</a>, <a class="el" href="loader_8h_source.html#l00041">Udine::Course::students</a>, <a class="el" href="neighbourhood_8h_source.html#l00042">Udine::Neighbourhood::type</a>, <a class="el" href="model_8h_source.html#l00047">Udine::Model::vars</a>, and <a class="el" href="variables_8h_source.html#l00038">Udine::Variables::x</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00321">Udine::SolutionSavingStrategyI::main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00064"></a>00064                                {
<a name="l00065"></a>00065   <span class="keywordtype">int</span> i = 0;
<a name="l00066"></a>00066   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = 0; r &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#0236aa15c9e367c0b235a5398d19356c">getRoomCount</a>(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a>); r++)
<a name="l00067"></a>00067     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#6020dc8bfec316fa74b5594ce6bb12e9">getCourseCount</a>(); c++)
<a name="l00068"></a>00068       <span class="keywordflow">if</span> (<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#4c909a0eef4e65ba4ab46d61b64fbca3">getCourse</a>(c).<a class="code" href="struct_udine_1_1_course.html#2909492606f4e5219897b2219225858c">students</a> &gt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#f6827d2b6244b724b0f6156228d4bdef">getRoomPerEventCapacity</a>(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a>, r))
<a name="l00069"></a>00069         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p = 0; p &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#e66c619fb7725c038dad84d29cf7880e">getPeriodCount</a>(); p++)
<a name="l00070"></a>00070           <span class="keywordflow">try</span> { 
<a name="l00071"></a>00071             <span class="keywordflow">if</span> (<a class="code" href="strategy_8cpp.html#e32e602f9e9db5c127e1eece8c797425">roundProperly</a>(getValue(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#a2eb63247509b9e19c3ca82b1ff3becd">x</a>[p][r][c])) == 1) 
<a name="l00072"></a>00072               i += <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#4c909a0eef4e65ba4ab46d61b64fbca3">getCourse</a>(c).<a class="code" href="struct_udine_1_1_course.html#2909492606f4e5219897b2219225858c">students</a> - <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#f6827d2b6244b724b0f6156228d4bdef">getRoomPerEventCapacity</a>(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a>, r);
<a name="l00073"></a>00073           }
<a name="l00074"></a>00074           <span class="keywordflow">catch</span> (IloAlgorithm::NotExtractedException e)  { std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#a2eb63247509b9e19c3ca82b1ff3becd">x</a>[p][r][c].getName() &lt;&lt; std::endl; }
<a name="l00075"></a>00075           <span class="keywordflow">catch</span> (...) { std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#a2eb63247509b9e19c3ca82b1ff3becd">x</a>[p][r][c].getName() &lt;&lt; std::endl; <span class="keywordflow">throw</span>; }
<a name="l00076"></a>00076   <span class="keywordflow">return</span> i;
<a name="l00077"></a>00077 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="045b6e91b05c618173a100a72b097eb4"></a><!-- doxytag: member="Udine::StrategyI::sumSingletonChecks" ref="045b6e91b05c618173a100a72b097eb4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int StrategyI::sumSingletonChecks           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8cpp_source.html#l00044">44</a> of file <a class="el" href="strategy_8cpp_source.html">strategy.cpp</a>.</p>

<p>References <a class="el" href="strategy_8h_source.html#l00045">config</a>, <a class="el" href="model_8h_source.html#l00051">Udine::Model::definition</a>, <a class="el" href="solver__config_8h_source.html#l00044">Udine::FixDay</a>, <a class="el" href="solver__config_8h_source.html#l00043">Udine::FixPeriod</a>, <a class="el" href="loader_8h_source.html#l00101">Udine::Instance::getCheckCount()</a>, <a class="el" href="loader_8h_source.html#l00099">Udine::Instance::getDayCount()</a>, <a class="el" href="solver__config_8cpp_source.html#l00078">Udine::Config::getParam()</a>, <a class="el" href="loader_8h_source.html#l00103">Udine::Instance::getProperCurriculumCount()</a>, <a class="el" href="model_8h_source.html#l00044">Udine::Model::instance</a>, <a class="el" href="strategy_8h_source.html#l00046">model</a>, <a class="el" href="neighbourhood_8h_source.html#l00049">Udine::Neighbourhood::penaltyCompactness</a>, <a class="el" href="strategy_8cpp_source.html#l00030">roundProperly()</a>, <a class="el" href="variables_8h_source.html#l00050">Udine::Variables::singletonChecks</a>, <a class="el" href="solver__config_8h_source.html#l00042">Udine::Surface</a>, <a class="el" href="neighbourhood_8h_source.html#l00042">Udine::Neighbourhood::type</a>, <a class="el" href="solver__config_8h_source.html#l00062">Udine::UseHeuristicCompactnessAtSurface</a>, <a class="el" href="solver__config_8h_source.html#l00063">Udine::UseHeuristicCompactnessInDayDives</a>, and <a class="el" href="model_8h_source.html#l00047">Udine::Model::vars</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00170">getFixDayNeighbourhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00134">getFixPeriodNeighbourhood()</a>, and <a class="el" href="strategy_8cpp_source.html#l00321">Udine::SolutionSavingStrategyI::main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00044"></a>00044                                   {
<a name="l00045"></a>00045   <span class="keywordflow">if</span> (<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> == <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378d0dea5c2f48fa71a1600db62dc494764">FixPeriod</a>)
<a name="l00046"></a>00046     <span class="keywordflow">return</span> <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#69f83574b01b2b10f11d76405eb116b1">penaltyCompactness</a>;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <span class="keywordtype">int</span> i = 0;
<a name="l00049"></a>00049   <span class="comment">// TODO: if (config.getParam(UseSpreadOnlyNeighbourhoods)) return i;</span>
<a name="l00050"></a>00050   <span class="keywordtype">int</span> limit = <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#070ffcb647a98cd8b71427cbd2a52e11">getCheckCount</a>();
<a name="l00051"></a>00051   <span class="keywordflow">if</span> ((<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> == <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378b86b6f367bcdf26a24c1eda8835804ec">Surface</a> &amp;&amp; <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>.<a class="code" href="struct_udine_1_1_config.html#442ff0dfb189dd3f733e0876f3c17405">getParam</a>(<a class="code" href="namespace_udine.html#7a28bfbd1d7d606db82f999b139d9aaef428f45eea1a07ce50a5a97293294da0">UseHeuristicCompactnessAtSurface</a>))
<a name="l00052"></a>00052       || (<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#928587761859afb30c99cdb5bbb7b20b">definition</a>.<a class="code" href="struct_udine_1_1_neighbourhood.html#c3471fcbd33b97ef04823b49719d7fb6">type</a> == <a class="code" href="namespace_udine.html#1748c504ab86482c137f902a5b474378ebd0021c0608a1b50450cd305a2e9f4c">FixDay</a> &amp;&amp; <a class="code" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">config</a>.<a class="code" href="struct_udine_1_1_config.html#442ff0dfb189dd3f733e0876f3c17405">getParam</a>(<a class="code" href="namespace_udine.html#7a28bfbd1d7d606db82f999b139d9aae3b9f2cabaa49f6c6ea247ff9d675e881">UseHeuristicCompactnessInDayDives</a>)))
<a name="l00053"></a>00053     limit = 1;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> u = 0; u &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#2bcb4470bb54b8e6b1017c84df8f780f">getProperCurriculumCount</a>(); u++)
<a name="l00056"></a>00056     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d = 0; d &lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#e1a1e700d38b731c4785686fc2badeed">instance</a>.<a class="code" href="class_udine_1_1_instance.html#a69b0cbf804f657b02b9bebd807a11ce">getDayCount</a>(); d++)
<a name="l00057"></a>00057       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; limit; s++)
<a name="l00058"></a>00058         <span class="keywordflow">try</span> { i += <a class="code" href="strategy_8cpp.html#e32e602f9e9db5c127e1eece8c797425">roundProperly</a>(getValue(<a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#d227516b2b7214b0a902ce72d3c4f0b1">singletonChecks</a>[u][d][s])); }
<a name="l00059"></a>00059         <span class="keywordflow">catch</span> (IloAlgorithm::NotExtractedException e)  { std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#d227516b2b7214b0a902ce72d3c4f0b1">singletonChecks</a>[u][d][s].getName() &lt;&lt; std::endl; }
<a name="l00060"></a>00060         <span class="keywordflow">catch</span> (...) { std::cerr &lt;&lt; <span class="stringliteral">"Error retrieving "</span> &lt;&lt; <a class="code" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">model</a>.<a class="code" href="class_udine_1_1_model.html#102fa262004a7b6229173b43c8000f95">vars</a>.<a class="code" href="struct_udine_1_1_variables.html#d227516b2b7214b0a902ce72d3c4f0b1">singletonChecks</a>[u][d][s].getName() &lt;&lt; std::endl; <span class="keywordflow">throw</span>; }
<a name="l00061"></a>00061   <span class="keywordflow">return</span> i;
<a name="l00062"></a>00062 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="88206bf5447f65d712d08bc9b67c0473"></a><!-- doxytag: member="Udine::StrategyI::config" ref="88206bf5447f65d712d08bc9b67c0473" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_udine_1_1_config.html">Config</a>&amp; <a class="el" href="class_udine_1_1_strategy_i.html#88206bf5447f65d712d08bc9b67c0473">Udine::StrategyI::config</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8h_source.html#l00045">45</a> of file <a class="el" href="strategy_8h_source.html">strategy.h</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00410">Udine::SolutionPolishingStrategyI::finishOff()</a>, <a class="el" href="strategy_8cpp_source.html#l00293">Udine::ContractStrategyI::finishOff()</a>, <a class="el" href="strategy_8cpp_source.html#l00091">logNeighbrouhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00405">Udine::SolutionPolishingStrategyI::main()</a>, <a class="el" href="strategy_8cpp_source.html#l00321">Udine::SolutionSavingStrategyI::main()</a>, <a class="el" href="strategy_8cpp_source.html#l00261">Udine::AnytimeStrategyI::main()</a>, <a class="el" href="strategy_8cpp_source.html#l00221">runDiver()</a>, and <a class="el" href="strategy_8cpp_source.html#l00044">sumSingletonChecks()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a588eceb4e1520c02b2255162374757e"></a><!-- doxytag: member="Udine::StrategyI::env" ref="a588eceb4e1520c02b2255162374757e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IloEnv <a class="el" href="class_udine_1_1_strategy_i.html#a588eceb4e1520c02b2255162374757e">Udine::StrategyI::env</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8h_source.html#l00044">44</a> of file <a class="el" href="strategy_8h_source.html">strategy.h</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00170">getFixDayNeighbourhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00134">getFixPeriodNeighbourhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00091">logNeighbrouhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00321">Udine::SolutionSavingStrategyI::main()</a>, and <a class="el" href="strategy_8cpp_source.html#l00221">runDiver()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c37977ee8b13268603b6a8ab41e071cd"></a><!-- doxytag: member="Udine::StrategyI::model" ref="c37977ee8b13268603b6a8ab41e071cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_udine_1_1_model.html">Model</a>&amp; <a class="el" href="class_udine_1_1_strategy_i.html#c37977ee8b13268603b6a8ab41e071cd">Udine::StrategyI::model</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="strategy_8h_source.html#l00046">46</a> of file <a class="el" href="strategy_8h_source.html">strategy.h</a>.</p>

<p>Referenced by <a class="el" href="strategy_8cpp_source.html#l00170">getFixDayNeighbourhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00134">getFixPeriodNeighbourhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00091">logNeighbrouhood()</a>, <a class="el" href="strategy_8cpp_source.html#l00405">Udine::SolutionPolishingStrategyI::main()</a>, <a class="el" href="strategy_8cpp_source.html#l00321">Udine::SolutionSavingStrategyI::main()</a>, <a class="el" href="strategy_8cpp_source.html#l00221">runDiver()</a>, <a class="el" href="strategy_8cpp_source.html#l00079">sumExtraRoomsUsed()</a>, <a class="el" href="strategy_8cpp_source.html#l00032">sumMissingCourseDays()</a>, <a class="el" href="strategy_8cpp_source.html#l00064">sumMissingSeats()</a>, and <a class="el" href="strategy_8cpp_source.html#l00044">sumSingletonChecks()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="strategy_8h_source.html">strategy.h</a><li>src/<a class="el" href="strategy_8cpp_source.html">strategy.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon May 11 19:03:10 2009 for MemosTimetabling by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
